# Torito Website

C# + ASP.NET の学習のために考えたWebサイトの構成や運営、運用の案。

「**小鳥と泊まれる宿**」の検索サイト 開発計画サマリー

## 1. 基本コンセプトと要件

- 小鳥と泊まれる宿に特化したクチコミ・検索サイト
- ユーザー（閲覧者）と宿主の双方に価値を提供

## 2. 収益化モデル

- **閲覧アカウント向けプラン**
    - **フリープラン**
        - 料金: 無料
        - 機能: 宿の検索・閲覧、クチコミ投稿(月3件)、お気に入り登録(10件)、広告表示あり
    - **プレミアム閲覧プラン**
        - 料金: 300円/月
        - 機能: 無制限のクチコミ投稿、無制限のお気に入り登録、高度な検索、広告非表示、限定コンテンツ
- **宿主アカウント向けプラン**
    - **フリープラン**
        - 料金: 無料
        - 機能: 基本情報登録、写真掲載(5枚)、クチコミ閲覧のみ
    - **パートナープラン**
        - 料金: 1,500円/月
        - 機能: 無制限の写真掲載、検索結果で優遇表示、クチコミへの返信、分析ダッシュボード、公式マーク

## 3. 主な機能仕様

- **認証**: メール/パスワード、Googleアカウントでのログイン
- **検索**: キーワード、エリア、こだわり条件での絞り込み
- **クチコミ**: 自己申告制、NGワードリストによる非同期検閲
- **宿情報**: 外部APIから定期的に同期

## 4. 開発構成

- **フロントエンド**
    - 言語: TypeScript
    - ライブラリ: React
    - ビルドツール: Vite
    - ホスティング: AWS S3 + Amazon CloudFront
- **バックエンド**
    - 言語: C#
    - フレームワーク: ASP.NET Core Web API
    - ホスティング: AWS App Runner
- **データベース**
    - 種類: PostgreSQL
    - ホスティング: Amazon RDS
- **その他AWSサービス**
    - 認証: Amazon Cognito
    - 非同期/バッチ処理: Amazon SQS + AWS Lambda
    - ファイルストレージ: AWS S3
- **インフラ管理**
    - IaC: AWS CDK (TypeScript)
- **CI/CD**
    - ツール: GitHub Actions
- **外部サービス**
    - 決済: Stripe
    - 宿情報取得: 楽天トラベルAPIなど

## 5. ローカル開発環境

- **バックエンド/DB**: Docker, Docker Compose
- **フロントエンド**: Node.js (Vite開発サーバー)

## 6. 開発手順概要

- **環境設定**
    - AWS CDKでインフラを構築 (`cdk deploy`)
    - Stripeで商品とAPIキーを準備
- **ローカル開発環境構築**
    - `docker-compose up` でバックエンドとDBを起動
    - `npm run dev` でフロントエンドを起動
- **実装: バックエンド**
    - Entity Framework CoreでDB連携
    - 認証・認可ミドルウェアを実装
    - Stripe連携 (Checkout, Webhook)
- **実装: フロントエンド**
    - APIの型定義を管理
    - UIコンポーネントを実装
    - Cognito連携 (ログイン/登録)
- **デプロイ (CI/CD)**
    - GitHub Actionsでパイプラインを構築
    - `main`ブランチへのマージをトリガーに、フロントエンドはS3へ、バックエンドはApp Runnerへ自動デプロイ
